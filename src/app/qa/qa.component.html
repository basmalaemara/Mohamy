<div class="w-full max-w-5xl mx-auto bg-slate-900/70 rounded-2xl shadow-2xl border border-slate-800 p-5 text-slate-50">
  <h2 class="text-2xl font-semibold mb-3 text-right">
    اسأل المحامي المصري
  </h2>

  <div class="grid gap-4 lg:grid-rows-[1fr_auto] min-h-[430px]">
    <!-- Chat history -->
    <div class="border border-slate-700 rounded-xl h-72 lg:h-80 overflow-y-auto p-3 bg-slate-900/70 space-y-2">
      <div *ngFor="let message of chatHistory"
           [ngClass]="message.sender === 'user' ? 'text-right' : 'text-left'">
        <div
          [ngClass]="message.sender === 'user'
            ? 'inline-block px-3 py-2 rounded-2xl bg-blue-600 text-white shadow-sm max-w-[80%]'
            : 'inline-block px-3 py-2 rounded-2xl bg-slate-200 text-slate-900 shadow-sm max-w-[80%]'"
        >
          {{ message.text }}
        </div>
      </div>

      <div *ngIf="chatHistory.length === 0" class="text-center text-slate-500 mt-6 text-sm">
        اكتب سؤالك القانوني في الأسفل، وسيقوم النظام بتمريره إلى الوكلاء (التحليل – الاسترجاع – الإجابة).
      </div>
    </div>

    <!-- Large input frame -->
    <div class="border border-slate-700 rounded-xl bg-slate-900/80 p-3 space-y-3">
      <label class="block text-sm text-slate-300 text-right mb-1">
        صياغة السؤال القانوني
      </label>
      <textarea
        [(ngModel)]="userInput"
        rows="4"
        class="w-full rounded-xl border border-slate-700 bg-slate-950/80 px-3 py-2
               focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
               text-sm resize-none"
        placeholder="مثال: ما هي الخطوات القانونية الصحيحة لفسخ عقد الإيجار في مصر؟"
      ></textarea>

      <div class="flex justify-between items-center gap-3" dir="rtl">
        <span class="text-xs text-slate-400 text-right">
          ⚖️ من فضلك تجنب ذكر بيانات شخصية، استخدم وصفاً عاماً للحالة.
        </span>

        <button
          (click)="sendMessage()"
          class="px-6 py-2 rounded-xl bg-blue-600 text-white font-medium
                 hover:bg-blue-500 active:bg-blue-700
                 transition-all duration-200 ease-out
                 shadow-md hover:shadow-lg transform hover:-translate-y-[1px]"
          style="direction: ltr;"
        >
          إرسال السؤال
        </button>
      </div>
    </div>
  </div>
</div>
